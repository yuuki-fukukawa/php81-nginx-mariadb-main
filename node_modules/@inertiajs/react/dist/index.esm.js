import{router as St}from"@inertiajs/core";import{router as Ke,setupProgress as Be}from"@inertiajs/core";import{createElement as Ve}from"react";import{createHeadManager as Oe,router as fe}from"@inertiajs/core";import{createElement as O,useEffect as Me,useMemo as Le,useState as He}from"react";import{createContext as ke}from"react";var le=ke(void 0);le.displayName="InertiaHeadContext";var B=le;import{createContext as we}from"react";var de=we(void 0);de.displayName="InertiaPageContext";var V=de;var ne=!0,me=!1,ge=async()=>{ne=!1};function q({children:r,initialPage:e,initialComponent:i,resolveComponent:s,titleCallback:a,onHeadUpdate:f}){let[d,P]=He({component:i||null,page:e,key:null}),c=Le(()=>Oe(typeof window>"u",a||(l=>l),f||(()=>{})),[]);if(me||(fe.init({initialPage:e,resolveComponent:s,swapComponent:async l=>ge(l)}),me=!0),Me(()=>{ge=async({component:l,page:u,preserveState:o})=>{if(ne){ne=!1;return}P(t=>({component:l,page:u,key:o?t.key:Date.now()}))},fe.on("navigate",()=>c.forceUpdate())},[]),!d.component)return O(B.Provider,{value:c},O(V.Provider,{value:d.page},null));let m=r||(({Component:l,props:u,key:o})=>{let t=O(l,{key:o,...u});return typeof l.layout=="function"?l.layout(t):Array.isArray(l.layout)?l.layout.concat(t).reverse().reduce((g,F)=>O(F,{children:g,...u})):t});return O(B.Provider,{value:c},O(V.Provider,{value:d.page},m({Component:d.component,key:d.key,props:d.page.props})))}q.displayName="Inertia";async function ye({id:r="app",resolve:e,setup:i,title:s,progress:a={},page:f,render:d}){let P=typeof window>"u",c=P?null:document.getElementById(r),m=f||JSON.parse(c.dataset.page),l=t=>Promise.resolve(e(t)).then(g=>g.default||g),u=[],o=await Promise.all([l(m.component),Ke.decryptHistory().catch(()=>{})]).then(([t])=>i({el:c,App:q,props:{initialPage:m,initialComponent:t,resolveComponent:l,titleCallback:s,onHeadUpdate:P?g=>u=g:null}}));if(!P&&a&&Be(a),P){let t=await d(Ve("div",{id:r,"data-page":JSON.stringify(m)},o));return{head:u,body:t}}}import{useEffect as Pe,useMemo as Ne,useState as je}from"react";import{useContext as Ue}from"react";function J(){let r=Ue(V);if(!r)throw new Error("usePage must be used within the Inertia component");return r}var he=r=>(r=new URL(r.href),r.hash="",r),$e=(r,e)=>he(r).href===he(e).href,Fe=({children:r,data:e,fallback:i})=>{if(!e)throw new Error("`<Deferred>` requires a `data` prop to be a string or array of strings");let[s,a]=je(!1),f=J().props,d=Ne(()=>Array.isArray(e)?e:[e],[e]);return Pe(()=>{let P=Se.on("start",c=>{let m=c.detail.visit.only.length>0||c.detail.visit.except.length>0,l=c.detail.visit.only.find(u=>d.includes(u));$e(c.detail.visit.url,window.location)&&(!m||l)&&a(!1)});return()=>{P()}},[]),Pe(()=>{a(d.every(P=>f[P]!==void 0))},[f,d]),s?r:i};Fe.displayName="InertiaDeferred";var We=Fe;import Te,{useContext as _e,useEffect as qe,useMemo as Je}from"react";var ze=function({children:r,title:e}){let i=_e(B),s=Je(()=>i.createProvider(),[i]),a=typeof window>"u";qe(()=>(s.reconnect(),s.update(u(r)),()=>{s.disconnect()}),[s,r,e]);function f(o){return["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].indexOf(o.type)>-1}function d(o){let t=Object.keys(o.props).reduce((g,F)=>{if(["head-key","children","dangerouslySetInnerHTML"].includes(F))return g;let b=o.props[F];return b===""?g+` ${F}`:g+` ${F}="${b}"`},"");return`<${o.type}${t}>`}function P(o){return typeof o.props.children=="string"?o.props.children:o.props.children.reduce((t,g)=>t+c(g),"")}function c(o){let t=d(o);return o.props.children&&(t+=P(o)),o.props.dangerouslySetInnerHTML&&(t+=o.props.dangerouslySetInnerHTML.__html),f(o)||(t+=`</${o.type}>`),t}function m(o){return Te.cloneElement(o,{inertia:o.props["head-key"]!==void 0?o.props["head-key"]:""})}function l(o){return c(m(o))}function u(o){let t=Te.Children.toArray(o).filter(g=>g).map(g=>l(g));return e&&!t.find(g=>g.startsWith("<title"))&&t.push(`<title inertia>${e}</title>`),t}return a&&s.update(u(r)),null},Qe=ze;import{mergeDataIntoQueryString as Ye,router as se,shouldIntercept as ae}from"@inertiajs/core";import{createElement as Ge,forwardRef as Xe,useEffect as ve,useMemo as be,useRef as Ze,useState as et}from"react";var x=()=>{},Ce=Xe(({children:r,as:e="a",data:i={},href:s,method:a="get",preserveScroll:f=!1,preserveState:d=null,replace:P=!1,only:c=[],except:m=[],headers:l={},queryStringArrayFormat:u="brackets",async:o=!1,onClick:t=x,onCancelToken:g=x,onBefore:F=x,onStart:b=x,onProgress:E=x,onFinish:Y=x,onCancel:j=x,onSuccess:G=x,onError:M=x,prefetch:T=!1,cacheFor:k=0,...R},X)=>{let[$,L]=et(0),H=Ze(null);e=e.toLowerCase(),a=typeof s=="object"?s.method:a.toLowerCase();let[Z,ee]=Ye(a,typeof s=="object"?s.url:s||"",i,u),w=Z;i=ee;let A={data:i,method:a,preserveScroll:f,preserveState:d??a!=="get",replace:P,only:c,except:m,headers:l,async:o},W={...A,onCancelToken:g,onBefore:F,onStart(p){L(y=>y+1),b(p)},onProgress:E,onFinish(p){L(y=>y-1),Y(p)},onCancel:j,onSuccess:G,onError:M},K=()=>{se.prefetch(w,A,{cacheFor:te})},D=be(()=>T===!0?["hover"]:T===!1?[]:Array.isArray(T)?T:[T],Array.isArray(T)?T:[T]),te=be(()=>k!==0?k:D.length===1&&D[0]==="click"?0:3e4,[k,D]);ve(()=>()=>{clearTimeout(H.current)},[]),ve(()=>{D.includes("mount")&&setTimeout(()=>K())},D);let _={onClick:p=>{t(p),ae(p)&&(p.preventDefault(),se.visit(w,W))}},re={onMouseEnter:()=>{H.current=window.setTimeout(()=>{K()},75)},onMouseLeave:()=>{clearTimeout(H.current)},onClick:_.onClick},oe={onMouseDown:p=>{ae(p)&&(p.preventDefault(),K())},onMouseUp:p=>{p.preventDefault(),se.visit(w,W)},onClick:p=>{t(p),ae(p)&&p.preventDefault()}};return a!=="get"&&(e="button"),Ge(e,{...R,...{a:{href:w},button:{type:"button"}}[e]||{},ref:X,...D.includes("hover")?re:D.includes("click")?oe:_,"data-loading":$>0?"":void 0},r)});Ce.displayName="InertiaLink";var tt=Ce;import{router as De}from"@inertiajs/core";import{cloneDeep as z,isEqual as nt}from"es-toolkit";import{get as st,has as at,set as ie}from"es-toolkit/compat";import{useCallback as v,useEffect as it,useLayoutEffect as pt,useMemo as ut,useRef as Q,useState as I}from"react";import{router as Re}from"@inertiajs/core";import{useEffect as rt,useState as ot}from"react";function U(r,e){let[i,s]=ot(()=>{let a=Re.restore(e);return a!==void 0?a:r});return rt(()=>{Re.remember(i,e)},[i,e]),[i,s]}function xe(r,e){let i=Q(null),s=typeof r=="string"?r:null,[a,f]=I((typeof r=="string"?e:r)||{}),d=Q(null),P=Q(null),[c,m]=s?U(a,`${s}:data`):I(a),[l,u]=s?U({},`${s}:errors`):I({}),[o,t]=I(!1),[g,F]=I(!1),[b,E]=I(null),[Y,j]=I(!1),[G,M]=I(!1),T=Q(n=>n),k=ut(()=>!nt(c,a),[c,a]);it(()=>(i.current=!0,()=>{i.current=!1}),[]);let R=v((...n)=>{let p=typeof n[0]=="object",y=p?n[0].method:n[0],C=p?n[0].url:n[1],h=(p?n[1]:n[2])??{},ce={...h,onCancelToken:S=>{if(d.current=S,h.onCancelToken)return h.onCancelToken(S)},onBefore:S=>{if(j(!1),M(!1),clearTimeout(P.current),h.onBefore)return h.onBefore(S)},onStart:S=>{if(F(!0),h.onStart)return h.onStart(S)},onProgress:S=>{if(E(S),h.onProgress)return h.onProgress(S)},onSuccess:S=>{if(i.current&&(F(!1),E(null),u({}),t(!1),j(!0),M(!0),f(z(c)),P.current=setTimeout(()=>{i.current&&M(!1)},2e3)),h.onSuccess)return h.onSuccess(S)},onError:S=>{if(i.current&&(F(!1),E(null),u(S),t(!0)),h.onError)return h.onError(S)},onCancel:()=>{if(i.current&&(F(!1),E(null)),h.onCancel)return h.onCancel()},onFinish:S=>{if(i.current&&(F(!1),E(null)),d.current=null,h.onFinish)return h.onFinish(S)}};y==="delete"?De.delete(C,{...ce,data:T.current(c)}):De[y](C,T.current(c),ce)},[c,u,T]),X=v((n,p)=>{m(typeof n=="string"?y=>ie(z(y),n,p):typeof n=="function"?y=>n(y):n)},[m]),[$,L]=I(!1),H=v((n,p)=>{typeof n>"u"?(f(c),L(!0)):f(y=>typeof n=="string"?ie(z(y),n,p):Object.assign(z(y),n))},[c,f]);pt(()=>{$&&(k&&f(c),L(!1))},[$]);let Z=v((...n)=>{n.length===0?m(a):m(p=>n.filter(y=>at(a,y)).reduce((y,C)=>ie(y,C,st(a,C)),{...p}))},[m,a]),ee=v((n,p)=>{u(y=>{let C={...y,...typeof n=="string"?{[n]:p}:n};return t(Object.keys(C).length>0),C})},[u,t]),w=v((...n)=>{u(p=>{let y=Object.keys(p).reduce((C,h)=>({...C,...n.length>0&&!n.includes(h)?{[h]:p[h]}:{}}),{});return t(Object.keys(y).length>0),y})},[u,t]),A=n=>(p,y)=>{R(n,p,y)},W=v(A("get"),[R]),K=v(A("post"),[R]),D=v(A("put"),[R]),te=v(A("patch"),[R]),_=v(A("delete"),[R]),re=v(()=>{d.current&&d.current.cancel()},[]),oe=v(n=>{T.current=n},[]);return{data:c,setData:X,isDirty:k,errors:l,hasErrors:o,processing:g,progress:b,wasSuccessful:Y,recentlySuccessful:G,transform:oe,setDefaults:H,reset:Z,setError:ee,clearErrors:w,submit:R,get:W,post:K,put:D,patch:te,delete:_,cancel:re}}import{router as ct}from"@inertiajs/core";import{useEffect as lt,useRef as dt}from"react";function Ie(r,e={},i={keepAlive:!1,autoStart:!0}){let s=dt(ct.poll(r,e,{...i,autoStart:!1}));return lt(()=>((i.autoStart??!0)&&s.current.start(),()=>s.current.stop()),[]),{stop:s.current.stop,start:s.current.start}}import{router as N}from"@inertiajs/core";import{useEffect as ft,useState as pe}from"react";function Ae(r={}){let e=typeof window>"u"?null:N.getCached(window.location.pathname,r),i=typeof window>"u"?null:N.getPrefetching(window.location.pathname,r),[s,a]=pe(e?.staleTimestamp||null),[f,d]=pe(i!==null),[P,c]=pe(e!==null);return ft(()=>{let m=N.on("prefetching",u=>{u.detail.visit.url.pathname===window.location.pathname&&d(!0)}),l=N.on("prefetched",u=>{u.detail.visit.url.pathname===window.location.pathname&&(d(!1),c(!0),a(u.detail.fetchedAt))});return()=>{l(),m()}},[]),{lastUpdatedAt:s,isPrefetching:f,isPrefetched:P,flush:()=>N.flush(window.location.pathname,r)}}import{router as mt}from"@inertiajs/core";import{createElement as gt,useCallback as yt,useEffect as Pt,useRef as ue,useState as ht}from"react";var Ee=({children:r,data:e,params:i,buffer:s,as:a,always:f,fallback:d})=>{f=f??!1,a=a??"div",d=d??null;let[P,c]=ht(!1),m=ue(!1),l=ue(!1),u=ue(null),o=yt(()=>{if(e)return{only:Array.isArray(e)?e:[e]};if(!i)throw new Error("You must provide either a `data` or `params` prop.");return i},[i,e]);return Pt(()=>{if(!u.current)return;let t=new IntersectionObserver(g=>{if(!g[0].isIntersecting||(!f&&m.current&&t.disconnect(),l.current))return;m.current=!0,l.current=!0;let F=o();mt.reload({...F,onStart:b=>{l.current=!0,F.onStart?.(b)},onFinish:b=>{c(!0),l.current=!1,F.onFinish?.(b),f||t.disconnect()}})},{rootMargin:`${s||0}px`});return t.observe(u.current),()=>{t.disconnect()}},[u,o,s]),f||!P?gt(a,{props:null,ref:u},P?r:d):P?r:null};Ee.displayName="InertiaWhenVisible";var Ft=Ee;var Se=St;export{We as Deferred,Qe as Head,tt as Link,Ft as WhenVisible,ye as createInertiaApp,Se as router,xe as useForm,J as usePage,Ie as usePoll,Ae as usePrefetch,U as useRemember};
//# sourceMappingURL=index.esm.js.map
