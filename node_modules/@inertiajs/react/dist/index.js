var $e=Object.create;var te=Object.defineProperty;var We=Object.getOwnPropertyDescriptor;var _e=Object.getOwnPropertyNames;var qe=Object.getPrototypeOf,Je=Object.prototype.hasOwnProperty;var ze=(e,t)=>{for(var r in t)te(e,r,{get:t[r],enumerable:!0})},be=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of _e(t))!Je.call(e,o)&&o!==r&&te(e,o,{get:()=>t[o],enumerable:!(a=We(t,o))||a.enumerable});return e};var Qe=(e,t,r)=>(r=e!=null?$e(qe(e)):{},be(t||!e||!e.__esModule?te(r,"default",{value:e,enumerable:!0}):r,e)),Ye=e=>be(te({},"__esModule",{value:!0}),e);var Ze={};ze(Ze,{Deferred:()=>Me,Head:()=>Le,Link:()=>Ke,WhenVisible:()=>Ne,createInertiaApp:()=>ge,router:()=>ye,useForm:()=>Fe,usePage:()=>Y,usePoll:()=>Se,usePrefetch:()=>Te,useRemember:()=>U});module.exports=Ye(Ze);var je=require("@inertiajs/core");var oe=require("@inertiajs/core"),Ee=require("react");var Q=require("@inertiajs/core"),C=require("react");var Ce=require("react"),Re=(0,Ce.createContext)(void 0);Re.displayName="InertiaHeadContext";var J=Re;var De=require("react"),xe=(0,De.createContext)(void 0);xe.displayName="InertiaPageContext";var z=xe;var me=!0,Ie=!1,Ae=async()=>{me=!1};function re({children:e,initialPage:t,initialComponent:r,resolveComponent:a,titleCallback:o,onHeadUpdate:m}){let[f,h]=(0,C.useState)({component:r||null,page:t,key:null}),l=(0,C.useMemo)(()=>(0,Q.createHeadManager)(typeof window>"u",o||(d=>d),m||(()=>{})),[]);if(Ie||(Q.router.init({initialPage:t,resolveComponent:a,swapComponent:async d=>Ae(d)}),Ie=!0),(0,C.useEffect)(()=>{Ae=async({component:d,page:c,preserveState:s})=>{if(me){me=!1;return}h(n=>({component:d,page:c,key:s?n.key:Date.now()}))},Q.router.on("navigate",()=>l.forceUpdate())},[]),!f.component)return(0,C.createElement)(J.Provider,{value:l},(0,C.createElement)(z.Provider,{value:f.page},null));let g=e||(({Component:d,props:c,key:s})=>{let n=(0,C.createElement)(d,{key:s,...c});return typeof d.layout=="function"?d.layout(n):Array.isArray(d.layout)?d.layout.concat(n).reverse().reduce((y,S)=>(0,C.createElement)(S,{children:y,...c})):n});return(0,C.createElement)(J.Provider,{value:l},(0,C.createElement)(z.Provider,{value:f.page},g({Component:f.component,key:f.key,props:f.page.props})))}re.displayName="Inertia";async function ge({id:e="app",resolve:t,setup:r,title:a,progress:o={},page:m,render:f}){let h=typeof window>"u",l=h?null:document.getElementById(e),g=m||JSON.parse(l.dataset.page),d=n=>Promise.resolve(t(n)).then(y=>y.default||y),c=[],s=await Promise.all([d(g.component),oe.router.decryptHistory().catch(()=>{})]).then(([n])=>r({el:l,App:re,props:{initialPage:g,initialComponent:n,resolveComponent:d,titleCallback:a,onHeadUpdate:h?y=>c=y:null}}));if(!h&&o&&(0,oe.setupProgress)(o),h){let n=await f((0,Ee.createElement)("div",{id:e,"data-page":JSON.stringify(g)},s));return{head:c,body:n}}}var H=require("react");var ke=require("react");function Y(){let e=(0,ke.useContext)(z);if(!e)throw new Error("usePage must be used within the Inertia component");return e}var we=e=>(e=new URL(e.href),e.hash="",e),Ge=(e,t)=>we(e).href===we(t).href,Oe=({children:e,data:t,fallback:r})=>{if(!t)throw new Error("`<Deferred>` requires a `data` prop to be a string or array of strings");let[a,o]=(0,H.useState)(!1),m=Y().props,f=(0,H.useMemo)(()=>Array.isArray(t)?t:[t],[t]);return(0,H.useEffect)(()=>{let h=ye.on("start",l=>{let g=l.detail.visit.only.length>0||l.detail.visit.except.length>0,d=l.detail.visit.only.find(c=>f.includes(c));Ge(l.detail.visit.url,window.location)&&(!g||d)&&o(!1)});return()=>{h()}},[]),(0,H.useEffect)(()=>{o(f.every(h=>m[h]!==void 0))},[m,f]),a?e:r};Oe.displayName="InertiaDeferred";var Me=Oe;var k=Qe(require("react"),1);var Xe=function({children:e,title:t}){let r=(0,k.useContext)(J),a=(0,k.useMemo)(()=>r.createProvider(),[r]),o=typeof window>"u";(0,k.useEffect)(()=>(a.reconnect(),a.update(c(e)),()=>{a.disconnect()}),[a,e,t]);function m(s){return["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].indexOf(s.type)>-1}function f(s){let n=Object.keys(s.props).reduce((y,S)=>{if(["head-key","children","dangerouslySetInnerHTML"].includes(S))return y;let D=s.props[S];return D===""?y+` ${S}`:y+` ${S}="${D}"`},"");return`<${s.type}${n}>`}function h(s){return typeof s.props.children=="string"?s.props.children:s.props.children.reduce((n,y)=>n+l(y),"")}function l(s){let n=f(s);return s.props.children&&(n+=h(s)),s.props.dangerouslySetInnerHTML&&(n+=s.props.dangerouslySetInnerHTML.__html),m(s)||(n+=`</${s.type}>`),n}function g(s){return k.default.cloneElement(s,{inertia:s.props["head-key"]!==void 0?s.props["head-key"]:""})}function d(s){return l(g(s))}function c(s){let n=k.default.Children.toArray(s).filter(y=>y).map(y=>d(y));return t&&!n.find(y=>y.startsWith("<title"))&&n.push(`<title inertia>${t}</title>`),n}return o&&a.update(c(e)),null},Le=Xe;var I=require("@inertiajs/core"),v=require("react"),w=()=>{},He=(0,v.forwardRef)(({children:e,as:t="a",data:r={},href:a,method:o="get",preserveScroll:m=!1,preserveState:f=null,replace:h=!1,only:l=[],except:g=[],headers:d={},queryStringArrayFormat:c="brackets",async:s=!1,onClick:n=w,onCancelToken:y=w,onBefore:S=w,onStart:D=w,onProgress:L=w,onFinish:ae=w,onCancel:G=w,onSuccess:ie=w,onError:$=w,prefetch:b=!1,cacheFor:B=0,...A},pe)=>{let[X,W]=(0,v.useState)(0),_=(0,v.useRef)(null);t=t.toLowerCase(),o=typeof a=="object"?a.method:o.toLowerCase();let[ue,ce]=(0,I.mergeDataIntoQueryString)(o,typeof a=="object"?a.url:a||"",r,c),V=ue;r=ce;let O={data:r,method:o,preserveScroll:m,preserveState:f??o!=="get",replace:h,only:l,except:g,headers:d,async:s},Z={...O,onCancelToken:y,onBefore:S,onStart(u){W(P=>P+1),D(u)},onProgress:L,onFinish(u){W(P=>P-1),ae(u)},onCancel:G,onSuccess:ie,onError:$},q=()=>{I.router.prefetch(V,O,{cacheFor:le})},E=(0,v.useMemo)(()=>b===!0?["hover"]:b===!1?[]:Array.isArray(b)?b:[b],Array.isArray(b)?b:[b]),le=(0,v.useMemo)(()=>B!==0?B:E.length===1&&E[0]==="click"?0:3e4,[B,E]);(0,v.useEffect)(()=>()=>{clearTimeout(_.current)},[]),(0,v.useEffect)(()=>{E.includes("mount")&&setTimeout(()=>q())},E);let ee={onClick:u=>{n(u),(0,I.shouldIntercept)(u)&&(u.preventDefault(),I.router.visit(V,Z))}},de={onMouseEnter:()=>{_.current=window.setTimeout(()=>{q()},75)},onMouseLeave:()=>{clearTimeout(_.current)},onClick:ee.onClick},fe={onMouseDown:u=>{(0,I.shouldIntercept)(u)&&(u.preventDefault(),q())},onMouseUp:u=>{u.preventDefault(),I.router.visit(V,Z)},onClick:u=>{n(u),(0,I.shouldIntercept)(u)&&u.preventDefault()}};return o!=="get"&&(t="button"),(0,v.createElement)(t,{...A,...{a:{href:V},button:{type:"button"}}[t]||{},ref:pe,...E.includes("hover")?de:E.includes("click")?fe:ee,"data-loading":X>0?"":void 0},e)});He.displayName="InertiaLink";var Ke=He;var he=require("@inertiajs/core"),K=require("es-toolkit"),M=require("es-toolkit/compat"),p=require("react");var Pe=require("@inertiajs/core"),ne=require("react");function U(e,t){let[r,a]=(0,ne.useState)(()=>{let o=Pe.router.restore(t);return o!==void 0?o:e});return(0,ne.useEffect)(()=>{Pe.router.remember(r,t)},[r,t]),[r,a]}function Fe(e,t){let r=(0,p.useRef)(null),a=typeof e=="string"?e:null,[o,m]=(0,p.useState)((typeof e=="string"?t:e)||{}),f=(0,p.useRef)(null),h=(0,p.useRef)(null),[l,g]=a?U(o,`${a}:data`):(0,p.useState)(o),[d,c]=a?U({},`${a}:errors`):(0,p.useState)({}),[s,n]=(0,p.useState)(!1),[y,S]=(0,p.useState)(!1),[D,L]=(0,p.useState)(null),[ae,G]=(0,p.useState)(!1),[ie,$]=(0,p.useState)(!1),b=(0,p.useRef)(i=>i),B=(0,p.useMemo)(()=>!(0,K.isEqual)(l,o),[l,o]);(0,p.useEffect)(()=>(r.current=!0,()=>{r.current=!1}),[]);let A=(0,p.useCallback)((...i)=>{let u=typeof i[0]=="object",P=u?i[0].method:i[0],x=u?i[0].url:i[1],F=(u?i[1]:i[2])??{},ve={...F,onCancelToken:T=>{if(f.current=T,F.onCancelToken)return F.onCancelToken(T)},onBefore:T=>{if(G(!1),$(!1),clearTimeout(h.current),F.onBefore)return F.onBefore(T)},onStart:T=>{if(S(!0),F.onStart)return F.onStart(T)},onProgress:T=>{if(L(T),F.onProgress)return F.onProgress(T)},onSuccess:T=>{if(r.current&&(S(!1),L(null),c({}),n(!1),G(!0),$(!0),m((0,K.cloneDeep)(l)),h.current=setTimeout(()=>{r.current&&$(!1)},2e3)),F.onSuccess)return F.onSuccess(T)},onError:T=>{if(r.current&&(S(!1),L(null),c(T),n(!0)),F.onError)return F.onError(T)},onCancel:()=>{if(r.current&&(S(!1),L(null)),F.onCancel)return F.onCancel()},onFinish:T=>{if(r.current&&(S(!1),L(null)),f.current=null,F.onFinish)return F.onFinish(T)}};P==="delete"?he.router.delete(x,{...ve,data:b.current(l)}):he.router[P](x,b.current(l),ve)},[l,c,b]),pe=(0,p.useCallback)((i,u)=>{g(typeof i=="string"?P=>(0,M.set)((0,K.cloneDeep)(P),i,u):typeof i=="function"?P=>i(P):i)},[g]),[X,W]=(0,p.useState)(!1),_=(0,p.useCallback)((i,u)=>{typeof i>"u"?(m(l),W(!0)):m(P=>typeof i=="string"?(0,M.set)((0,K.cloneDeep)(P),i,u):Object.assign((0,K.cloneDeep)(P),i))},[l,m]);(0,p.useLayoutEffect)(()=>{X&&(B&&m(l),W(!1))},[X]);let ue=(0,p.useCallback)((...i)=>{i.length===0?g(o):g(u=>i.filter(P=>(0,M.has)(o,P)).reduce((P,x)=>(0,M.set)(P,x,(0,M.get)(o,x)),{...u}))},[g,o]),ce=(0,p.useCallback)((i,u)=>{c(P=>{let x={...P,...typeof i=="string"?{[i]:u}:i};return n(Object.keys(x).length>0),x})},[c,n]),V=(0,p.useCallback)((...i)=>{c(u=>{let P=Object.keys(u).reduce((x,F)=>({...x,...i.length>0&&!i.includes(F)?{[F]:u[F]}:{}}),{});return n(Object.keys(P).length>0),P})},[c,n]),O=i=>(u,P)=>{A(i,u,P)},Z=(0,p.useCallback)(O("get"),[A]),q=(0,p.useCallback)(O("post"),[A]),E=(0,p.useCallback)(O("put"),[A]),le=(0,p.useCallback)(O("patch"),[A]),ee=(0,p.useCallback)(O("delete"),[A]),de=(0,p.useCallback)(()=>{f.current&&f.current.cancel()},[]),fe=(0,p.useCallback)(i=>{b.current=i},[]);return{data:l,setData:pe,isDirty:B,errors:d,hasErrors:s,processing:y,progress:D,wasSuccessful:ae,recentlySuccessful:ie,transform:fe,setDefaults:_,reset:ue,setError:ce,clearErrors:V,submit:A,get:Z,post:q,put:E,patch:le,delete:ee,cancel:de}}var Be=require("@inertiajs/core"),se=require("react");function Se(e,t={},r={keepAlive:!1,autoStart:!0}){let a=(0,se.useRef)(Be.router.poll(e,t,{...r,autoStart:!1}));return(0,se.useEffect)(()=>((r.autoStart??!0)&&a.current.start(),()=>a.current.stop()),[]),{stop:a.current.stop,start:a.current.start}}var N=require("@inertiajs/core"),j=require("react");function Te(e={}){let t=typeof window>"u"?null:N.router.getCached(window.location.pathname,e),r=typeof window>"u"?null:N.router.getPrefetching(window.location.pathname,e),[a,o]=(0,j.useState)(t?.staleTimestamp||null),[m,f]=(0,j.useState)(r!==null),[h,l]=(0,j.useState)(t!==null);return(0,j.useEffect)(()=>{let g=N.router.on("prefetching",c=>{c.detail.visit.url.pathname===window.location.pathname&&f(!0)}),d=N.router.on("prefetched",c=>{c.detail.visit.url.pathname===window.location.pathname&&(f(!1),l(!0),o(c.detail.fetchedAt))});return()=>{d(),g()}},[]),{lastUpdatedAt:a,isPrefetching:m,isPrefetched:h,flush:()=>N.router.flush(window.location.pathname,e)}}var Ve=require("@inertiajs/core"),R=require("react"),Ue=({children:e,data:t,params:r,buffer:a,as:o,always:m,fallback:f})=>{m=m??!1,o=o??"div",f=f??null;let[h,l]=(0,R.useState)(!1),g=(0,R.useRef)(!1),d=(0,R.useRef)(!1),c=(0,R.useRef)(null),s=(0,R.useCallback)(()=>{if(t)return{only:Array.isArray(t)?t:[t]};if(!r)throw new Error("You must provide either a `data` or `params` prop.");return r},[r,t]);return(0,R.useEffect)(()=>{if(!c.current)return;let n=new IntersectionObserver(y=>{if(!y[0].isIntersecting||(!m&&g.current&&n.disconnect(),d.current))return;g.current=!0,d.current=!0;let S=s();Ve.router.reload({...S,onStart:D=>{d.current=!0,S.onStart?.(D)},onFinish:D=>{l(!0),d.current=!1,S.onFinish?.(D),m||n.disconnect()}})},{rootMargin:`${a||0}px`});return n.observe(c.current),()=>{n.disconnect()}},[c,s,a]),m||!h?(0,R.createElement)(o,{props:null,ref:c},h?e:f):h?e:null};Ue.displayName="InertiaWhenVisible";var Ne=Ue;var ye=je.router;
//# sourceMappingURL=index.js.map
