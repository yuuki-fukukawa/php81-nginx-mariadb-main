"use strict";var f=Object.create;var i=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var P=Object.getOwnPropertyNames;var R=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty;var b=(e,r)=>{for(var t in r)i(e,t,{get:r[t],enumerable:!0})},l=(e,r,t,a)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of P(r))!v.call(e,o)&&o!==t&&i(e,o,{get:()=>r[o],enumerable:!(a=w(r,o))||a.enumerable});return e};var m=(e,r,t)=>(t=e!=null?f(R(e)):{},l(r||!e||!e.__esModule?i(t,"default",{value:e,enumerable:!0}):t,e)),I=e=>l(i({},"__esModule",{value:!0}),e);var A={};b(A,{default:()=>k});module.exports=I(A);var u=require("http"),d=m(require("process"),1),n=m(require("node:cluster"),1),g=require("node:os"),O=e=>new Promise((r,t)=>{let a="";e.on("data",o=>a+=o),e.on("end",()=>r(a)),e.on("error",o=>t(o))}),k=(e,r)=>{let t=typeof r=="number"?r:r?.port??13714,a=typeof r=="object"&&r?.cluster!==void 0?r.cluster:!1,o=s=>{console.log(a&&!n.default.isPrimary?`[${n.default.worker?.id??"N/A"} / ${n.default.worker?.process?.pid??"N/A"}] ${s}`:s)};if(a&&n.default.isPrimary){o("Primary Inertia SSR server process started...");for(let s=0;s<(0,g.availableParallelism)();s++)n.default.fork();return}let c={"/health":async()=>({status:"OK",timestamp:Date.now()}),"/shutdown":()=>d.exit(),"/render":async s=>e(JSON.parse(await O(s))),"/404":async()=>({status:"NOT_FOUND",timestamp:Date.now()})};(0,u.createServer)(async(s,p)=>{let y=c[s.url]||c["/404"];try{p.writeHead(200,{"Content-Type":"application/json",Server:"Inertia.js SSR"}),p.write(JSON.stringify(await y(s)))}catch(S){console.error(S)}p.end()}).listen(t,()=>o("Inertia SSR server started.")),o(`Starting SSR server on port ${t}...`)};
//# sourceMappingURL=server.js.map
